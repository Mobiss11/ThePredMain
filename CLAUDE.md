# ThePred - Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ°

**Ğ’ĞµÑ€ÑĞ¸Ñ**: 1.4
**Ğ”Ğ°Ñ‚Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ**: 10 Ğ½Ğ¾ÑĞ±Ñ€Ñ 2025
**ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ**: 98% Complete ğŸ‰

> **âš¡ï¸ Ğ’ĞĞ–ĞĞ**:
> - Ğ”Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ ÑÑ‚Ğ°Ñ€Ñ‚Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ‡Ğ¸Ñ‚Ğ°Ğ¹ **[CONTEXT.md](CONTEXT.md)** - Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸, ÑÑ‚Ğ°Ñ‚ÑƒÑ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ², Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹
> - Ğ”Ğ»Ñ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¼. Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ñ‹ Ğ½Ğ¸Ğ¶Ğµ
> - ĞŸĞ¾ÑĞ»Ğµ Ğ¿ĞµÑ€ĞµÑ€Ñ‹Ğ²Ğ° Ğ’Ğ¡Ğ•Ğ“Ğ”Ğ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ğ¹ Ñ CONTEXT.md

---

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

1. [Ğ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ](#Ğ¾-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ)
2. [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
3. [Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº](#Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹-ÑÑ‚ĞµĞº)
4. [Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°](#ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
5. [ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹](#Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ-ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹)
6. [Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#Ğ±Ğ°Ğ·Ğ°-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
7. [Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°](#Ğ·Ğ°Ğ¿ÑƒÑĞº-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
8. [Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°](#Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°)
9. [Production Deployment](#production-deployment)

---

## Ğ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ

**ThePred** - Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° prediction markets (Ñ€Ñ‹Ğ½ĞºĞ¸ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğ¹) Ğ² Telegram. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ´ĞµĞ»Ğ°ÑÑ‚ ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ğ½Ğ° Ğ¸ÑÑ…Ğ¾Ğ´Ñ‹ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ² ĞºÑ€Ğ¸Ğ¿Ñ‚Ğµ, ÑĞ¿Ğ¾Ñ€Ñ‚Ğµ Ğ¸ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞµ, Ğ·Ğ°Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ PRED.

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:

- ğŸ¯ **Prediction Markets** - ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ğ½Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
- ğŸ’° **Ğ¢Ğ¾ĞºĞµĞ½ PRED** - Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ÑÑ Ğ²Ğ°Ğ»ÑÑ‚Ğ° (Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ: 10,000 PRED)
- ğŸ’ **TON Blockchain** - Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ TON Wallet (Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)
- ğŸ® **Ğ“ĞµĞ¹Ğ¼Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ** - 19 Ğ¼Ğ¸ÑÑĞ¸Ğ¹, Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ, Ğ»Ğ¸Ğ´ĞµÑ€Ğ±Ğ¾Ñ€Ğ´
- ğŸ“± **Telegram Mini App** - Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ¾Ğµ Ğ²ĞµĞ±-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
- ğŸ‘‘ **Ğ Ğ°Ğ½Ğ³Ğ¾Ğ²Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°** - Bronze â†’ Silver â†’ Gold â†’ Diamond â†’ Grandmaster
- ğŸ“Š **ĞĞ´Ğ¼Ğ¸Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ** - ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€Ñ‹Ğ½ĞºĞ°Ğ¼Ğ¸, Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸, broadcast
- ğŸ“¢ **Broadcast ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°** - Ğ¼Ğ°ÑÑĞ¾Ğ²Ñ‹Ğµ Ñ€Ğ°ÑÑÑ‹Ğ»ĞºĞ¸ Ñ rate limiting (30 msg/sec)
- ğŸ“… **Scheduled Broadcasts** - Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ€Ğ°ÑÑÑ‹Ğ»ĞºĞ¸ Ñ datetime picker
- ğŸ« **Support ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°** - Ñ‚Ğ¸ĞºĞµÑ‚Ñ‹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸

### Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ:

1. **ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ Ñ Ñ€Ñ‹Ğ½ĞºĞ¾Ğ²** - 2-5% Ğ¾Ñ‚ pool
2. **ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼-Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°** - ÑĞºÑĞºĞ»ÑĞ·Ğ¸Ğ²Ğ½Ñ‹Ğµ Ñ€Ñ‹Ğ½ĞºĞ¸, Ğ±Ğ¾Ğ½ÑƒÑÑ‹
3. **Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ°** - Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€ÑĞºĞ¸Ğµ Ñ€Ñ‹Ğ½ĞºĞ¸, ÑĞ¿Ğ¾Ğ½ÑĞ¾Ñ€ÑĞºĞ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TELEGRAM BOT (@The_Pred_Bot)            â”‚
â”‚                    aiogram 3.x                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MINI APP (https://thepred.tech)              â”‚
â”‚         Quart + Jinja2 + Tailwind CSS                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           BACKEND API (FastAPI:8000)                 â”‚
â”‚                                                      â”‚
â”‚  Auth | Markets | Bets | Users | Missions           â”‚
â”‚  Leaderboard | Wallet | Admin | Support             â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                              â”‚
      â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL 15â”‚              â”‚   Redis 7   â”‚
â”‚  (Database)  â”‚              â”‚   (Cache)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MinIO S3    â”‚
â”‚(thepred.storeâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          TELEGRAM WORKER (notification queue)        â”‚
â”‚          Rate Limiting: 30 msg/sec                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     BROADCAST SCHEDULER (scheduled broadcasts)       â”‚
â”‚          Checks every 60 seconds                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ADMIN PANEL (Quart:8002)                     â”‚
â”‚  Dashboard | Markets | Users | Broadcast | Support  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LANDING PAGE (Quart:8003)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

### Backend
- **FastAPI** 0.109.0 - REST API
- **SQLAlchemy** 2.0.25 - ORM (async)
- **Alembic** 1.13.1 - Database migrations
- **PostgreSQL** 15.x - Primary database
- **Redis** 7.x - Cache & sessions
- **JWT** - Authentication (24h expiration)
- **boto3** - S3/MinIO integration

### Frontend
- **Quart** 0.19.4 - Async Flask (Mini App, Admin, Landing)
- **Jinja2** - Templates
- **Tailwind CSS** 3.x - Styling
- **Chart.js** - Admin dashboard charts
- **aiohttp** - API client

### Bot & Worker
- **aiogram** 3.x - Telegram Bot framework
- **asyncio** - Async processing
- **APScheduler** - Scheduled tasks

### DevOps
- **Docker** + **Docker Compose** - Containerization
- **PM2** - Process management (production)
- **Nginx** - Reverse proxy
- **Let's Encrypt** - SSL certificates

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
ThePred/
â”œâ”€â”€ backend/                    # FastAPI Backend (Ğ¿Ğ¾Ñ€Ñ‚ 8000)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/endpoints/      # 40+ API endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”‚   â”œâ”€â”€ markets.py
â”‚   â”‚   â”‚   â”œâ”€â”€ bets.py
â”‚   â”‚   â”‚   â”œâ”€â”€ users.py
â”‚   â”‚   â”‚   â”œâ”€â”€ missions.py
â”‚   â”‚   â”‚   â”œâ”€â”€ leaderboard.py
â”‚   â”‚   â”‚   â”œâ”€â”€ wallet.py       # Ğ’ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py
â”‚   â”‚   â”‚   â”œâ”€â”€ support.py
â”‚   â”‚   â”‚   â””â”€â”€ scheduler.py
â”‚   â”‚   â”œâ”€â”€ core/               # Config, Database, Security
â”‚   â”‚   â”œâ”€â”€ models/             # 12 SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”‚   â”‚   â””â”€â”€ services/           # Business logic
â”‚   â”œâ”€â”€ alembic/                # Database migrations
â”‚   â”œâ”€â”€ telegram_worker.py      # Notification queue processor
â”‚   â”œâ”€â”€ broadcast_scheduler.py  # Scheduled broadcasts processor
â”‚   â””â”€â”€ seed_data.py            # Test data (20 markets, 19 missions)
â”‚
â”œâ”€â”€ bot/                        # Telegram Bot
â”‚   â”œâ”€â”€ main.py                 # aiogram bot
â”‚   â””â”€â”€ handlers/               # /start, /support, etc.
â”‚
â”œâ”€â”€ webapp/                     # Mini App (Ğ¿Ğ¾Ñ€Ñ‚ 8001)
â”‚   â”œâ”€â”€ main.py                 # Quart app
â”‚   â”œâ”€â”€ templates/              # Markets, Profile, Missions, Leaderboard
â”‚   â””â”€â”€ api_client.py           # Async Backend API client
â”‚
â”œâ”€â”€ admin/                      # Admin Panel (Ğ¿Ğ¾Ñ€Ñ‚ 8002)
â”‚   â”œâ”€â”€ main.py                 # Admin interface
â”‚   â””â”€â”€ templates/              # Dashboard, Markets, Users, Broadcast, Support
â”‚
â”œâ”€â”€ landing/                    # Landing Page (Ğ¿Ğ¾Ñ€Ñ‚ 8003)
â”‚   â””â”€â”€ templates/              # Marketing site
â”‚
â”œâ”€â”€ docker-compose.yml          # Development setup
â”œâ”€â”€ .env                        # Environment variables
â”œâ”€â”€ Makefile                    # Development commands
â”œâ”€â”€ CLAUDE.md                   # Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ» (Ğ³Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ)
â”œâ”€â”€ CONTEXT.md                  # Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ, Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸, Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸
â””â”€â”€ README.md                   # English documentation
```

---

## ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

### 1. Backend API (FastAPI)

**ĞŸĞ¾Ñ€Ñ‚**: 8000 | **Swagger**: http://localhost:8000/docs

#### API Endpoints (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ):

```python
# Authentication
POST   /auth/register              # Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Telegram ID
POST   /auth/token                 # JWT Ñ‚Ğ¾ĞºĞµĞ½ (24h)

# Markets
GET    /markets/                   # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ€Ñ‹Ğ½ĞºĞ¾Ğ² (Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹, Ğ¿Ğ¾Ğ¸ÑĞº)
GET    /markets/{id}               # Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ñ€Ñ‹Ğ½ĞºĞ°
GET    /markets/{id}/stats         # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ñ€Ñ‹Ğ½ĞºĞ°

# Bets
POST   /bets/                      # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ğ²ĞºÑƒ (AMM odds calculation)
GET    /bets/my                    # ĞœĞ¾Ğ¸ ÑÑ‚Ğ°Ğ²ĞºĞ¸
GET    /bets/{id}                  # Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑÑ‚Ğ°Ğ²ĞºĞ¸

# Users
GET    /users/me                   # ĞœĞ¾Ğ¹ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ
GET    /users/me/stats             # ĞœĞ¾Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°

# Missions (19 types)
GET    /missions/                  # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¼Ğ¸ÑÑĞ¸Ğ¹
POST   /missions/{id}/claim        # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ñƒ

# Leaderboard
GET    /leaderboard/               # Ğ¢Ğ¾Ğ¿ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ (profit, win_rate, win_streak, total_wins)

# Admin - Markets
POST   /admin/markets              # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ€Ñ‹Ğ½Ğ¾Ğº
POST   /admin/markets/{id}/resolve # Ğ Ğ°Ğ·Ñ€ĞµÑˆĞ¸Ñ‚ÑŒ Ñ€Ñ‹Ğ½Ğ¾Ğº (YES/NO/CANCELLED)
PATCH  /admin/markets/{id}         # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ€Ñ‹Ğ½Ğ¾Ğº
DELETE /admin/markets/{id}         # Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ñ€Ñ‹Ğ½Ğ¾Ğº

# Admin - Users
GET    /admin/users                # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
PATCH  /admin/users/{id}           # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
POST   /admin/users/{id}/ban       # Ğ—Ğ°Ğ±Ğ°Ğ½Ğ¸Ñ‚ÑŒ
POST   /admin/users/{id}/unban     # Ğ Ğ°Ğ·Ğ±Ğ°Ğ½Ğ¸Ñ‚ÑŒ

# Admin - Broadcast
POST   /admin/broadcast                     # ĞœĞ°ÑÑĞ¾Ğ²Ğ°Ñ Ñ€Ğ°ÑÑÑ‹Ğ»ĞºĞ° (Ğ½ĞµĞ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ°Ñ)
POST   /admin/broadcast/schedule            # Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ñ€Ğ°ÑÑÑ‹Ğ»ĞºĞ° (NEW)
GET    /admin/broadcast/scheduled           # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… (NEW)
DELETE /admin/broadcast/scheduled/{id}      # ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½ÑƒÑ (NEW)

# Admin - Stats
GET    /admin/stats                # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹

# Support
POST   /support/tickets            # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ¸ĞºĞµÑ‚
GET    /support/tickets            # ĞœĞ¾Ğ¸ Ñ‚Ğ¸ĞºĞµÑ‚Ñ‹
POST   /support/tickets/{id}/messages # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
```

**Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑĞ¼. Ğ²**: [CONTEXT.md - API Endpoints](#)

### 2. Telegram Bot (aiogram)

**Ğ‘Ğ¾Ñ‚**: @The_Pred_Bot

```python
/start     # ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ + Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ 19 Ğ¼Ğ¸ÑÑĞ¸Ğ¹)
/help      # ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ
/support   # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ¸ĞºĞµÑ‚ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸ (FSM)
/balance   # ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ
/stats     # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°

# WebApp button - Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Mini App
```

### 3. Telegram Worker

**Ğ¤Ğ°Ğ¹Ğ»**: `backend/telegram_worker.py`

- ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ (telegram_notifications_queue)
- Rate limiting: 30 msg/sec (Telegram API limit)
- Batch processing (asyncio.gather)
- Error handling (temporary vs permanent failures)
- Retry logic (Ğ´Ğ¾ 5 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº)
- Photo support (send_photo with caption)

**Deployment**: PM2 process `telegram-worker`

### 4. Broadcast Scheduler

**Ğ¤Ğ°Ğ¹Ğ»**: `backend/broadcast_scheduler.py`

- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° scheduled broadcasts ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 60 ÑĞµĞºÑƒĞ½Ğ´
- ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° PENDING broadcasts Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ñ‡ĞµÑ€ĞµĞ· TelegramQueueService
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° target: all Ğ¸Ğ»Ğ¸ specific user
- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑÑ‹: PENDING â†’ PROCESSING â†’ COMPLETED

**Deployment**: PM2 process `broadcast-scheduler`

### 5. Mini App (Quart)

**URL**: https://thepred.tech | **Port**: 8001

**Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹**:
- `/` - Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ€Ñ‹Ğ½ĞºĞ¾Ğ² (Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹, Ğ¿Ğ¾Ğ¸ÑĞº, ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°)
- `/market/<id>` - Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ñ€Ñ‹Ğ½ĞºĞ° + betting interface
- `/profile` - ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ + bet history
- `/missions` - 19 Ğ¼Ğ¸ÑÑĞ¸Ğ¹ + claim rewards
- `/leaderboard` - Ğ¢Ğ¾Ğ¿ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ (4 Ñ‚Ğ¸Ğ¿Ğ° ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸)
- `/support` - Support tickets (Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ UI)

### 6. Admin Panel (Quart)

**URL**: https://admin.thepred.tech (internal) | **Port**: 8002

**Ğ Ğ°Ğ·Ğ´ĞµĞ»Ñ‹**:
- **Dashboard** - Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° (users, markets, bets, volume) + Chart.js Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸
- **Markets** - CRUD, resolve (YES/NO/CANCELLED), promote
- **Users** - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸, ban/unban, edit balance
- **Broadcast** - Rich editor, emoji picker, image upload, **scheduled broadcasts**
- **Support** - Ticket management, replies

**Broadcast Features** (NEW):
- Rich text editor (Bold, Italic, Code, Links, Lists)
- 32 emoji picker
- Image upload (Ğ´Ğ¾ 5MB) â†’ S3
- Character counter (1000 Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼, 4096 Ğ±ĞµĞ·)
- Parse mode: HTML / Markdown
- Target: all users / specific telegram_id
- **DateTime picker Ğ´Ğ»Ñ scheduled broadcasts** (UTC + Moscow time preview)
- **Real-time clock** (UTC + Moscow)
- **Validation**: min 5 minutes from now
- **Scheduled broadcasts table** (status, time, cancel button)

### 7. Landing Page (Quart)

**URL**: https://landing.thepred.tech | **Port**: 8003

- Hero section
- How it works
- Features
- Gamification preview
- Social proof
- SEO optimized

---

## Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### PostgreSQL 15 (12 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†)

```sql
1.  users                          # ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ (balance, rank, stats, ban)
2.  markets                        # Ğ Ñ‹Ğ½ĞºĞ¸ (title, category, pool, status)
3.  bets                          # Ğ¡Ñ‚Ğ°Ğ²ĞºĞ¸ (user, market, amount, odds, status)
4.  missions                      # ĞœĞ¸ÑÑĞ¸Ğ¸ (19 Ñ‚Ğ¸Ğ¿Ğ¾Ğ²)
5.  user_missions                 # ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ¼Ğ¸ÑÑĞ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
6.  transactions                  # Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹
7.  wallet_addresses              # TON ĞºĞ¾ÑˆĞµĞ»ÑŒĞºĞ¸ (Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)
8.  support_tickets               # Ğ¢Ğ¸ĞºĞµÑ‚Ñ‹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸
9.  support_messages              # Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² Ñ‚Ğ¸ĞºĞµÑ‚Ğ°Ñ…
10. telegram_notifications_queue  # ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
11. leaderboard_snapshots         # Ğ¡Ğ½Ğ¸Ğ¼ĞºĞ¸ Ğ»Ğ¸Ğ´ĞµÑ€Ğ±Ğ¾Ñ€Ğ´Ğ° (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
12. scheduled_broadcasts          # Ğ—Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ€Ğ°ÑÑÑ‹Ğ»ĞºĞ¸ (NEW)
```

**Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ…ĞµĞ¼Ñ‹ ÑĞ¼. Ğ²**: [CONTEXT.md - Database Schema](#)

### ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ (Alembic)

```bash
# ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
cd backend
alembic upgrade head

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ
alembic revision -m "Description"

# Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
alembic history

# Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ
alembic current
```

---

## Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### Development (Docker Compose)

```bash
# 1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
cd ThePred

# 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ .env
cp .env.example .env
# ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ .env Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ÑĞ¼Ğ¸

# 3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
make up
# Ğ¸Ğ»Ğ¸
docker-compose up -d

# 4. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
make db-migrate
# Ğ¸Ğ»Ğ¸
docker exec -it thepredmain-backend-1 alembic upgrade head

# 5. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
docker exec -it thepredmain-backend-1 python seed_data.py

# 6. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
make ps
make logs

# Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ URL:
# Backend API: http://localhost:8000/docs
# Mini App:    http://localhost:8001
# Admin Panel: http://localhost:8002
# Landing:     http://localhost:8003
```

### Production (PM2)

```bash
# 1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
cd /home/ThePredMain

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ venv Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ°
cd backend && python3 -m venv venv && source venv/bin/activate && pip install -r requirements.txt
cd ../bot && pip install -r requirements.txt
cd ../webapp && pip install -r requirements.txt
cd ../admin && pip install -r requirements.txt
cd ../landing && pip install -r requirements.txt

# 2. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
cd /home/ThePredMain/backend
source venv/bin/activate
POSTGRES_HOST=localhost alembic upgrade head

# 3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· PM2
pm2 start ecosystem.config.js

# 4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
pm2 status
pm2 logs --lines 50

# 5. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ PM2 config
pm2 save
pm2 startup

# ĞŸÑ€Ğ¾Ñ†ĞµÑÑÑ‹:
# - backend (FastAPI:8000)
# - bot (aiogram)
# - telegram-worker (notification queue)
# - broadcast-scheduler (scheduled broadcasts)
# - webapp (Quart:8001)
# - admin (Quart:8002)
# - landing (Quart:8003)
```

---

## Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

### Makefile ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ
make help          # ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ²ÑĞµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
make up            # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
make down          # ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
make restart       # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ
make logs          # Ğ›Ğ¾Ğ³Ğ¸ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
make ps            # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²

# Ğ›Ğ¾Ğ³Ğ¸ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
make logs-backend
make logs-bot
make logs-webapp

# Shell Ğ´Ğ¾ÑÑ‚ÑƒĞ¿
make backend-shell # Ğ’Ğ¾Ğ¹Ñ‚Ğ¸ Ğ² backend ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€
make db-shell      # PostgreSQL shell

# Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
make db-migrate    # ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
make db-reset      # Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ‘Ğ” (ĞĞŸĞĞ¡ĞĞ!)
make backup        # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ backup
```

### Environment Variables (.env)

```env
# Database
POSTGRES_DB=thepred
POSTGRES_USER=thepred
POSTGRES_PASSWORD=SUPER_STRONG_PASSWORD
POSTGRES_HOST=localhost  # Ğ¸Ğ»Ğ¸ postgres Ğ´Ğ»Ñ Docker

# JWT
JWT_SECRET=YOUR_SUPER_SECRET_JWT_KEY_32_CHARS
JWT_ALGORITHM=HS256
JWT_EXPIRE_HOURS=24

# Telegram
BOT_TOKEN=your_bot_token_here
BOT_USERNAME=The_Pred_Bot

# WebApp
WEBAPP_URL=https://thepred.tech
WEBAPP_SECRET_KEY=RANDOM_32_CHARS

# MinIO S3
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=admin
S3_SECRET_KEY=your_password
S3_BUCKET=thepred-events
S3_PUBLIC_URL=https://thepred.store

# API
API_URL=http://localhost:8000

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
```

### Git Workflow

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
git status

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
git add .

# ĞšĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ (Ñ Claude signature)
git commit -m "Description

Co-Authored-By: Claude <noreply@anthropic.com>"

# Push
git push origin main

# Pull Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
git pull origin main
```

### Debugging

```bash
# Backend API - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ endpoint
curl http://localhost:8000/docs

# Database - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
docker exec -it thepredmain-postgres-1 psql -U thepred -d thepred \
  -c "SELECT COUNT(*) FROM telegram_notifications_queue WHERE status = 'PENDING';"

# Telegram Worker - Ğ»Ğ¾Ğ³Ğ¸
pm2 logs telegram-worker --lines 100

# Broadcast Scheduler - Ğ»Ğ¾Ğ³Ğ¸
pm2 logs broadcast-scheduler --lines 100

# PM2 ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²
pm2 status

# PM2 Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³
pm2 monit
```

---

## Production Deployment

### 1. Server Requirements
- Ubuntu 22.04 LTS
- 2 CPU cores minimum
- 4 GB RAM minimum
- 20 GB SSD storage
- Domain Ñ SSL

### 2. Initial Setup

```bash
# Update system
sudo apt update && sudo apt upgrade -y

# Install Docker
curl -fsSL https://get.docker.com -o get-docker.sh && sh get-docker.sh

# Install Docker Compose
sudo apt install docker-compose -y

# Install Node.js + PM2
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs
sudo npm install -g pm2

# Install PostgreSQL client
sudo apt install postgresql-client -y

# Clone project
git clone https://github.com/Mobiss11/ThePredMain.git
cd ThePredMain
```

### 3. Configure Environment

```bash
# Create production .env
cp .env.example .env
nano .env

# Set production values:
# - Strong passwords
# - Production URLs (https://thepred.tech)
# - Real BOT_TOKEN
# - Production S3_PUBLIC_URL
# - DEBUG=false
```

### 4. Database & Migrations

```bash
# Start PostgreSQL via Docker
docker-compose up -d postgres

# Run migrations
cd backend
source venv/bin/activate
POSTGRES_HOST=localhost alembic upgrade head

# Seed data (optional)
POSTGRES_HOST=localhost python seed_data.py
```

### 5. Nginx Configuration

```bash
sudo apt install nginx -y

# Create config
sudo nano /etc/nginx/sites-available/thepred
```

**Nginx config example**:
```nginx
server {
    listen 80;
    server_name thepred.tech www.thepred.tech;

    location / {
        proxy_pass http://localhost:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location /api/ {
        proxy_pass http://localhost:8000/;
    }
}

server {
    listen 80;
    server_name admin.thepred.tech;
    location / {
        proxy_pass http://localhost:8002;
    }
}

server {
    listen 80;
    server_name thepred.store;
    location / {
        proxy_pass http://localhost:9000;
    }
}
```

```bash
# Enable site
sudo ln -s /etc/nginx/sites-available/thepred /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

### 6. SSL Certificates

```bash
sudo apt install certbot python3-certbot-nginx -y
sudo certbot --nginx -d thepred.tech -d www.thepred.tech -d admin.thepred.tech -d thepred.store
```

### 7. Start Services (PM2)

```bash
# Start all services
pm2 start ecosystem.config.js

# Check status
pm2 status

# Save config
pm2 save

# Enable on startup
pm2 startup
```

### 8. Monitoring

```bash
# PM2 monitoring
pm2 monit

# Logs
pm2 logs
pm2 logs backend
pm2 logs telegram-worker
pm2 logs broadcast-scheduler

# Restart
pm2 restart all
```

### 9. Database Backups

```bash
# Create backup script
cat > /home/ThePredMain/backup.sh << 'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
docker exec -it thepredmain-postgres-1 pg_dump -U thepred thepred > /home/ThePredMain/backups/backup_$DATE.sql
find /home/ThePredMain/backups -name "backup_*.sql" -mtime +7 -delete
EOF

chmod +x /home/ThePredMain/backup.sh

# Add to crontab (daily at 2 AM)
crontab -e
# Add: 0 2 * * * /home/ThePredMain/backup.sh
```

### 10. Updates

```bash
# Pull latest changes
cd /home/ThePredMain
git pull origin main

# Run migrations
cd backend
source venv/bin/activate
alembic upgrade head

# Restart services
pm2 restart all

# Check logs
pm2 logs --lines 50
```

---

## Ğ§Ñ‚Ğ¾ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ / ĞĞµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾

### âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ (98%)

**Backend API** - 100%
- 40+ endpoints (auth, markets, bets, users, missions, leaderboard, admin, support)
- JWT authentication
- AMM odds calculation
- Market resolution logic
- 19 missions system
- Rank system (Bronze â†’ Grandmaster)
- Ban system
- Notification queue
- Broadcast ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (text + images)
- **Scheduled broadcasts** (datetime picker, auto-send)

**Telegram Worker** - 100%
- Queue processing (30 msg/sec)
- Error handling + retry logic
- Photo support

**Broadcast Scheduler** - 100%
- Auto-check every 60 seconds
- PENDING â†’ PROCESSING â†’ COMPLETED

**Telegram Bot** - 100%
- /start, /support, WebApp integration

**Mini App** - 95%
- Markets, Profile, Missions, Leaderboard
- Support tickets UI (Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)

**Admin Panel** - 100%
- Dashboard, Markets, Users, **Broadcast**, Support
- Rich editor, emoji picker, image upload
- **Scheduled broadcasts table**
- **DateTime picker (UTC + Moscow preview)**

**Landing Page** - 100%
- Marketing site

**Database** - 100%
- 12 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†
- ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
- Seed data (20 markets, 19 missions)

**Production** - 100%
- PM2 deployment
- Nginx reverse proxy
- SSL certificates
- Database backups

### âŒ ĞĞµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ (2%)

**TON Wallet Integration** - 0%
- TON Connect SDK
- Deposit/Withdraw UI
- TON blockchain API
- ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ TON â†” PRED

**Support Tickets UI** - 50%
- Mini App UI Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
- Push ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ

**Testing** - 0%
- Unit tests
- Integration tests
- E2E tests

**Monitoring** - 20%
- Sentry (error tracking)
- Grafana + Prometheus
- Alerts

---

## Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

**ThePred** - Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° prediction markets Ñ Telegram Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹.

### Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ: 98% Complete âœ…

**Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸**:
1. TON Wallet Integration (ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ 1)
2. Testing (ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ 1)
3. Support Tickets UI (ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ 2)
4. Monitoring (ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ 2)

### Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# Development
make up            # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ
make logs          # Ğ›Ğ¾Ğ³Ğ¸
make db-migrate    # ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

# Production
pm2 status         # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²
pm2 logs --lines 50 # Ğ›Ğ¾Ğ³Ğ¸
pm2 restart all    # ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº

# Git
git status
git add .
git commit -m "Description"
git push origin main
```

### Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ ÑÑÑ‹Ğ»ĞºĞ¸

- **Main App**: https://thepred.tech
- **Admin Panel**: https://admin.thepred.tech
- **Bot**: @The_Pred_Bot
- **GitHub**: https://github.com/Mobiss11/ThePredMain
- **Backend API**: http://localhost:8000/docs

### ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹

- **CONTEXT.md** - Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ, Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸, Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸
- **TODO.md** - task tracker
- **README.md** - English documentation

---

**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ**: 10 Ğ½Ğ¾ÑĞ±Ñ€Ñ 2025
**Ğ’ĞµÑ€ÑĞ¸Ñ**: 1.4
**ĞĞ²Ñ‚Ğ¾Ñ€**: ThePred Team
