{% extends "base.html" %}
{% block title %}Leaderboard - ThePred Admin{% endblock %}
{% block content %}
<div class="max-w-6xl">
    <h1 class="text-3xl font-bold mb-8">Leaderboard (Top 100)</h1>
    <div class="bg-dark-800 rounded-lg overflow-hidden">
        <table class="w-full">
            <thead class="bg-dark-700">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400">Rank</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400">Username</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400">PRED Balance</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400">Total Bets</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400">Win Rate</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400">User Rank</th>
                </tr>
            </thead>
            <tbody id="leaderboard-tbody"></tbody>
        </table>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script>
async function loadLeaderboard() {
    const tbody = document.getElementById('leaderboard-tbody');
    const response = await fetch(`${API_URL}/admin/leaderboard?limit=100`);
    const leaderboard = await response.json();
    tbody.innerHTML = leaderboard.map(entry => `
        <tr class="border-t border-gray-800">
            <td class="px-6 py-4 font-bold ${entry.rank <= 3 ? 'text-yellow-400' : ''}">#${entry.rank}</td>
            <td class="px-6 py-4">${entry.username || entry.first_name || `User ${entry.user_id}`}</td>
            <td class="px-6 py-4 font-bold">${formatNumber(entry.pred_balance)}</td>
            <td class="px-6 py-4">${entry.total_bets}</td>
            <td class="px-6 py-4">${entry.win_rate}%</td>
            <td class="px-6 py-4"><span class="px-2 py-1 bg-yellow-600 rounded text-xs">${entry.user_rank}</span></td>
        </tr>
    `).join('');
}
loadLeaderboard();
</script>
{% endblock %}
