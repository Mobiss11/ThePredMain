# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –î–µ–ø–ª–æ—é - ThePred

**–î–∞—Ç–∞**: 4 –Ω–æ—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è**: 1.1

---

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### Backend:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º "all" –≤ —Å—Ç–∞—Ç—É—Å–µ —Ä—ã–Ω–∫–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/admin/markets/approved` –∏ `/admin/markets/cancelled`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ Resolve —Å POST –Ω–∞ PUT
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `icon` –≤ –º–æ–¥–µ–ª—å Mission
- –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –º–∏—Å—Å–∏–π

#### Webapp:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è (—É–±—Ä–∞–Ω await)
- –£–ª—É—á—à–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram WebApp
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∏—Å—Å–∏–π
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç claim –º–∏—Å—Å–∏–π

#### Admin Panel:
- –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–± "Cancelled" –¥–ª—è –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- "All Markets" –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ "Approved Markets" –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è Resolve —Å–æ–±—ã—Ç–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∏—Å—Å–∏–π
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 2. –ù–æ–≤–∞—è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### –°–∏—Å—Ç–µ–º–∞ –ú–∏—Å—Å–∏–π:
- 7 –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –º–∏—Å—Å–∏–π —Å –∏–∫–æ–Ω–∫–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ webapp —Å progress bar
- –ó–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É" –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

#### –£–ª—É—á—à–µ–Ω–∏—è –ü—Ä–æ—Ñ–∏–ª—è:
- –†–µ–∞–ª—å–Ω—ã–π —Ä–∞–Ω–≥ –∏–∑ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
- –ö–Ω–æ–ø–∫–∞ "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å" –ø–æ–¥ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π
- –†–µ–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

---

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –î–µ–ø–ª–æ—é

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å git
git status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
git diff

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
make ps
```

### –°–æ–∑–¥–∞—Ç—å Backup –ë–î

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞—Ç—å backup –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
ssh root@your-server

cd /root/ThePred

# Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec -T postgres pg_dump -U thepred thepred > backup_$(date +%Y%m%d_%H%M%S).sql

# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ backup —Å–æ–∑–¥–∞–Ω
ls -lh backup_*.sql
```

---

## –®–∞–≥ 2: –ö–æ–º–º–∏—Ç –∏ Push –ò–∑–º–µ–Ω–µ–Ω–∏–π

### –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å Backend –ò–∑–º–µ–Ω–µ–Ω–∏—è

```bash
cd /Users/alluc/Documents/ThePred

# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è backend
git add backend/app/init_missions.py
git add backend/app/main.py
git add backend/app/models/mission.py
git add backend/app/api/endpoints/missions.py
git add backend/app/api/endpoints/admin.py
git add backend/alembic/versions/

# –ö–æ–º–º–∏—Ç backend
git commit -m "feat: Add missions system and admin improvements

- Add default missions initialization (7 missions)
- Add icon field to Mission model
- Add /admin/markets/approved and /admin/markets/cancelled endpoints
- Fix enum filter error for market status
- Fix Resolve method (POST -> PUT)
"
```

### –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å Webapp –ò–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –î–æ–±–∞–≤–∏—Ç—å webapp –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add webapp/main.py
git add webapp/templates/missions.html
git add webapp/templates/profile.html

# –ö–æ–º–º–∏—Ç webapp
git commit -m "feat: Update webapp with missions and profile improvements

- Fix photo upload (remove await from file.read())
- Improve Telegram WebApp authentication
- Update missions page with real API integration
- Add progress bars and green claim button
- Update profile with real rank and events
- Move referral copy button below link
"
```

### –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å Admin –ò–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –î–æ–±–∞–≤–∏—Ç—å admin –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add admin/main.py
git add admin/templates/markets.html
git add admin/templates/missions.html

# –ö–æ–º–º–∏—Ç admin
git commit -m "feat: Add admin panel improvements

- Add 'Cancelled' tab for cancelled markets
- Rename 'All Markets' to 'Approved Markets'
- Fix Resolve function (PUT method)
- Add missions display page
- Fix user edit form
"
```

### –î–æ–±–∞–≤–∏—Ç—å DEPLOYMENT_GUIDE.md

```bash
git add DEPLOYMENT_GUIDE.md
git add MISSIONS_SUMMARY.md
git commit -m "docs: Add deployment and missions documentation"
```

### Push –Ω–∞ GitHub

```bash
# Push –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git push origin main

# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ push –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
git log --oneline -5
```

---

## –®–∞–≥ 3: –î–µ–ø–ª–æ–π –Ω–∞ –°–µ—Ä–≤–µ—Ä

### –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –°–µ—Ä–≤–µ—Ä—É

```bash
ssh root@your-server
cd /root/ThePred
```

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –°–µ—Ä–≤–∏—Å—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (–∫—Ä–æ–º–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
docker-compose stop backend webapp admin bot landing

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
docker-compose ps
```

### –ü–æ–ª—É—á–∏—Ç—å –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# Pull –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å GitHub
git pull origin main

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
git log --oneline -5
```

### –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ú–∏–≥—Ä–∞—Ü–∏—é –ë–î

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è icon
docker-compose exec backend alembic upgrade head

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
docker-compose exec backend alembic current

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: add_mission_icon (head)
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Backend

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend
docker-compose up -d backend

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞
sleep 10

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs backend | tail -50

# –ò—â–µ–º –≤ –ª–æ–≥–∞—Ö:
# "Initializing default missions..."
# "‚úì Created 7 default missions" (–µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)
# –∏–ª–∏
# "‚úì Missions already exist (7 missions found)" (–µ—Å–ª–∏ –º–∏—Å—Å–∏–∏ —É–∂–µ –±—ã–ª–∏)
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Webapp

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å webapp
docker-compose up -d webapp

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs webapp | tail -30
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Admin Panel

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å admin
docker-compose up -d admin

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs admin | tail -30
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Bot

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å bot
docker-compose up -d bot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs bot | tail -30
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í—Å–µ –°–µ—Ä–≤–∏—Å—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ "Up":
# - postgres (Up)
# - redis (Up)
# - backend (Up)
# - webapp (Up)
# - admin (Up)
# - bot (Up)
# - landing (Up)
```

---

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Backend API

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
curl http://localhost:8000/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok"}

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å missions endpoint
curl http://localhost:8000/admin/missions | jq '.[] | {id, title, icon}'

# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å 7 –º–∏—Å—Å–∏–π —Å –∏–∫–æ–Ω–∫–∞–º–∏
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Webapp

```bash
# –í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä—ã—Ç—å
https://your-domain.com

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
# - –°–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
# - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ —Å —Ñ–æ—Ç–æ
# - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∏—Å—Å–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç (/missions)
# - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–Ω–≥ (/profile)
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Admin Panel

```bash
# –í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä—ã—Ç—å
https://your-domain.com/admin

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# - 3 —Ç–∞–±–∞: Pending, Approved Markets, Cancelled
# - Approve/Reject —Ä–∞–±–æ—Ç–∞–µ—Ç
# - –ü–æ—Å–ª–µ –∞–ø—Ä—É–≤–∞ –∫–Ω–æ–ø–∫–∏ –∏—Å—á–µ–∑–∞—é—Ç
# - Resolve —Ä–∞–±–æ—Ç–∞–µ—Ç (PUT)
# - –°—Ç—Ä–∞–Ω–∏—Ü–∞ Missions –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 7 –º–∏—Å—Å–∏–π
# - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram Bot

```bash
# –í Telegram –æ—Ç–∫—Ä—ã—Ç—å @The_Pred_Bot
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å /start

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# - –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç
# - –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å ThePred" —Ä–∞–±–æ—Ç–∞–µ—Ç
# - WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
# - –ë–∞–ª–∞–Ω—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–Ω–µ "...")
# - –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫–∏
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ú–∏—Å—Å–∏–∏

```bash
# –í WebApp:
# - –û—Ç–∫—Ä—ã—Ç—å /missions
# - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è 7 –º–∏—Å—Å–∏–π
# - Progress bar –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
# - –ï—Å–ª–∏ –º–∏—Å—Å–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –∫–Ω–æ–ø–∫–∞ –∑–µ–ª–µ–Ω–∞—è

# –í Admin:
# - –û—Ç–∫—Ä—ã—Ç—å /admin/missions
# - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ 7 –º–∏—Å—Å–∏–π –≤ —Ç–∞–±–ª–∏—Ü–µ
```

---

## –®–∞–≥ 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ü–æ—Å–ª–µ –î–µ–ø–ª–æ—è

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –õ–æ–≥–∏

```bash
# Backend –ª–æ–≥–∏
docker-compose logs -f backend

# Webapp –ª–æ–≥–∏
docker-compose logs -f webapp

# Admin –ª–æ–≥–∏
docker-compose logs -f admin

# Bot –ª–æ–≥–∏
docker-compose logs -f bot

# –í—Å–µ –ª–æ–≥–∏ –≤–º–µ—Å—Ç–µ
docker-compose logs -f
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –û—à–∏–±–∫–∏

```bash
# –û—à–∏–±–∫–∏ backend
docker-compose logs backend | grep ERROR

# –û—à–∏–±–∫–∏ webapp
docker-compose logs webapp | grep ERROR

# –û—à–∏–±–∫–∏ admin
docker-compose logs admin | grep ERROR
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
docker-compose exec postgres psql -U thepred -d thepred

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏—Å—Å–∏–∏
SELECT id, title, icon, reward_amount FROM missions;

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 7 —Å—Ç—Ä–æ–∫

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–µ icon —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
\d missions

# –í –∫–æ–ª–æ–Ω–∫–∞—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
# icon | character varying(10)

# –í—ã–π—Ç–∏
\q
```

---

## Rollback (–û—Ç–∫–∞—Ç –ò–∑–º–µ–Ω–µ–Ω–∏–π)

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### 1. –û—Ç–∫–∞—Ç–∏—Ç—å –ö–æ–¥

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
git log --oneline -10

# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç
git reset --hard <commit-hash-before-changes>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose restart backend webapp admin bot
```

### 2. –û—Ç–∫–∞—Ç–∏—Ç—å –ú–∏–≥—Ä–∞—Ü–∏—é

```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose exec backend alembic downgrade -1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
docker-compose exec backend alembic current
```

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ Backup

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å backend
docker-compose stop backend

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î –∏–∑ backup
docker-compose exec -T postgres psql -U thepred -d thepred < backup_20251104_120000.sql

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend
docker-compose up -d backend
```

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏—Å—Å–∏–∏ –Ω–µ —Å–æ–∑–¥–∞–ª–∏—Å—å

**–°–∏–º–ø—Ç–æ–º—ã**: –í –ª–æ–≥–∞—Ö –Ω–µ—Ç "Created 7 default missions"

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs backend | grep missions

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ —Å –ë–î, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
docker-compose exec backend python -c "from app.core.database import engine; print('DB OK')"

# –°–æ–∑–¥–∞—Ç—å –º–∏—Å—Å–∏–∏ –≤—Ä—É—á–Ω—É—é
docker-compose exec backend python -c "from app.init_missions import init_default_missions; import asyncio; asyncio.run(init_default_missions())"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∞—Å—å

**–°–∏–º–ø—Ç–æ–º—ã**: –û—à–∏–±–∫–∞ "column missions.icon does not exist"

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
docker-compose exec backend alembic current

# –ï—Å–ª–∏ –Ω–µ –Ω–∞ head, –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é
docker-compose exec backend alembic upgrade head

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞, –æ—Ç–∫–∞—Ç–∏—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∑–∞–Ω–æ–≤–æ
docker-compose exec backend alembic downgrade -1
docker-compose exec backend alembic upgrade head
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–ª–∞–Ω—Å "..." –≤ Telegram

**–°–∏–º–ø—Ç–æ–º—ã**: –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–µ—Ä–µ–∑ Telegram –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "..." –≤–º–µ—Å—Ç–æ –±–∞–ª–∞–Ω—Å–∞

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DEV_MODE –≤ webapp
docker-compose exec webapp env | grep DEV_MODE

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å DEV_MODE=false –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env
nano .env
# –ù–∞–π—Ç–∏ DEV_MODE=true
# –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ DEV_MODE=false

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å webapp
docker-compose restart webapp
```

### –ü—Ä–æ–±–ª–µ–º–∞: Resolve –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Resolve –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ admin
docker-compose logs admin | grep resolve

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
docker-compose logs backend | grep resolve

# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PUT –º–µ—Ç–æ–¥
docker-compose exec admin grep -A5 "resolve" /app/main.py | grep -i put
```

### –ü—Ä–æ–±–ª–µ–º–∞: –§–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã**: –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è —Å —Ñ–æ—Ç–æ

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å S3/MinIO —Ä–∞–±–æ—Ç–∞–µ—Ç
docker-compose ps | grep minio

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ webapp
docker-compose logs webapp | grep photo

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ /app/uploads
docker-compose exec webapp ls -la /app/uploads
```

---

## –ò—Ç–æ–≥–æ–≤—ã–π –ß–µ–∫–ª–∏—Å—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –æ—Ç–º–µ—Ç—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã:

- [ ] –°–æ–∑–¥–∞–Ω backup –ë–î
- [ ] –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –∏ –∑–∞–ø—É—à–µ–Ω –Ω–∞ GitHub
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (git pull)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ (alembic upgrade head)
- [ ] Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] Webapp –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] Admin –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] Bot –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Å—Ç–∞—Ç—É—Å–µ "Up"
- [ ] Backend API –æ—Ç–≤–µ—á–∞–µ—Ç (/health)
- [ ] 7 –º–∏—Å—Å–∏–π —Å–æ–∑–¥–∞–Ω—ã –≤ –ë–î
- [ ] Webapp –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ —Å —Ñ–æ—Ç–æ
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∏—Å—Å–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–Ω–≥
- [ ] Admin –ø–∞–Ω–µ–ª—å: 3 —Ç–∞–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Admin: Approve/Reject —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Admin: Resolve —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Admin: –ú–∏—Å—Å–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] Admin: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Telegram –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç
- [ ] WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ –±–æ—Ç–∞
- [ ] –ë–∞–ª–∞–Ω—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ Telegram
- [ ] –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫–∏
- [ ] –õ–æ–≥–∏ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –§–∞–π–ª—ã, –ö–æ—Ç–æ—Ä—ã–µ –ë—ã–ª–∏ –ò–∑–º–µ–Ω–µ–Ω—ã

**Backend**:
- `backend/app/init_missions.py` (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- `backend/app/main.py`
- `backend/app/models/mission.py`
- `backend/app/api/endpoints/missions.py`
- `backend/app/api/endpoints/admin.py`
- `backend/alembic/versions/add_mission_icon.py` (–º–∏–≥—Ä–∞—Ü–∏—è)

**Webapp**:
- `webapp/main.py`
- `webapp/templates/missions.html`
- `webapp/templates/profile.html`

**Admin**:
- `admin/main.py`
- `admin/templates/markets.html`
- `admin/templates/missions.html`

### –ù–æ–≤—ã–µ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

**Backend API**:
- `GET /admin/markets/approved` - –¢–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ —Ä—ã–Ω–∫–∏
- `GET /admin/markets/cancelled` - –¢–æ–ª—å–∫–æ –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ —Ä—ã–Ω–∫–∏
- `PUT /admin/markets/{id}/resolve` - –†–∞—Å—á–µ—Ç —Å–æ–±—ã—Ç–∏—è (–∏–∑–º–µ–Ω–µ–Ω —Å POST –Ω–∞ PUT)

**Admin Proxy**:
- `GET /admin/markets/approved` - –ü—Ä–æ–∫—Å–∏ –∫ backend
- `GET /admin/markets/cancelled` - –ü—Ä–æ–∫—Å–∏ –∫ backend

### –ù–æ–≤—ã–µ –¢–∞–±–ª–∏—Ü—ã/–ö–æ–ª–æ–Ω–∫–∏

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `icon VARCHAR(10)` –≤ —Ç–∞–±–ª–∏—Ü—É `missions`

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã

**7 –î–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –ú–∏—Å—Å–∏–π**:
1. –ü–µ—Ä–≤–∞—è –°—Ç–∞–≤–∫–∞ (500 PRED) - 1 —Å—Ç–∞–≤–∫–∞
2. –ù–æ–≤–∏—á–æ–∫ (1000 PRED) - 5 —Å—Ç–∞–≤–æ–∫
3. –ü–µ—Ä–≤–∞—è –ü–æ–±–µ–¥–∞ (750 PRED) - 1 –≤—ã–∏–≥—Ä—ã—à
4. –°–µ—Ä–∏—è –ü–æ–±–µ–¥ (2000 PRED) - 3 –ø–æ–±–µ–¥—ã –ø–æ–¥—Ä—è–¥
5. –ê–∫—Ç–∏–≤–Ω—ã–π –¢—Ä–µ–π–¥–µ—Ä (2500 PRED) - 10 —Å—Ç–∞–≤–æ–∫
6. –õ—é–±–∏—Ç–µ–ª—å –ö—Ä–∏–ø—Ç—ã (1500 PRED) - 3 —Å—Ç–∞–≤–∫–∏ –Ω–∞ Crypto
7. –ü—Ä–∏–≥–ª–∞—Å–∏ –î—Ä—É–≥–∞ (2000 PRED) - 1 —Ä–µ—Ñ–µ—Ä–∞–ª

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ –î–µ–ø–ª–æ—è!** üöÄ
