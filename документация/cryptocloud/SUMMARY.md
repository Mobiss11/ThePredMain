# üì¶ CryptoCloud Module - –ü–æ–ª–Ω—ã–π –ø–∞–∫–µ—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üéØ –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏–ª–∏

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –º–æ–¥—É–ª—å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ CryptoCloud API –≤ –ª—é–±–æ–π FastAPI –ø—Ä–æ–µ–∫—Ç.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
docs/cryptocloud/
‚îú‚îÄ‚îÄ README.md                          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ INTEGRATION.md                     # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (45KB)
‚îú‚îÄ‚îÄ QUICKSTART.md                      # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 15 –º–∏–Ω—É—Ç (10KB)
‚îú‚îÄ‚îÄ SUMMARY.md                         # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ sql/
‚îÇ   ‚îú‚îÄ‚îÄ create_tables.sql             # SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
‚îÇ   ‚îî‚îÄ‚îÄ indexes.sql                   # –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ examples/
    ‚îú‚îÄ‚îÄ basic_integration.py          # –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä–∏–º–µ—Ä)
    ‚îî‚îÄ‚îÄ test_integration.py           # Unit –∏ integration —Ç–µ—Å—Ç—ã
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 1. README.md
**–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –û–±–∑–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Troubleshooting
- –°—Å—ã–ª–∫–∏ –Ω–∞ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –ü–µ—Ä–≤–æ–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –º–æ–¥—É–ª–µ–º

---

### 2. INTEGRATION.md (45,784 –±–∞–π—Ç)
**–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (8 —à–∞–≥–æ–≤)
- ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥–µ–ª–∏ –ë–î
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–¥ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ API endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ Unit –∏ integration —Ç–µ—Å—Ç—ã
- ‚úÖ Production checklist
- ‚úÖ Troubleshooting guide

**–†–∞–∑–¥–µ–ª—ã**:
1. –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã
2. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
4. –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
5. API Reference
6. Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
8. Troubleshooting
9. Production Checklist

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –Ω—É–ª—è, –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

---

### 3. QUICKSTART.md (10,659 –±–∞–π—Ç)
**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 15 –º–∏–Ω—É—Ç**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ SQL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü (copy-paste ready)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ (config.py, database.py, main.py)
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ endpoints
- ‚úÖ –¢–∏–ø–∏—á–Ω—ã–π –ø–æ—Ç–æ–∫ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –æ—Ç–ª–∞–¥–∫–∞
- ‚úÖ Checklist –ø–µ—Ä–µ–¥ production

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª—è

---

## üóÑÔ∏è SQL –°–∫—Ä–∏–ø—Ç—ã

### 1. create_tables.sql
**–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `payments` —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `payment_history` –¥–ª—è –∞—É–¥–∏—Ç–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `users` (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –ø–æ–¥–ø–∏—Å–∫–∏)
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `updated_at`
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ç–∞–±–ª–∏—Ü–∞–º –∏ –ø–æ–ª—è–º
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ CHECK constraints
- ‚úÖ Foreign keys —Å ON DELETE CASCADE

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
```bash
# PostgreSQL
psql -U username -d database_name -f create_tables.sql

# –∏–ª–∏ —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic revision -m "add cryptocloud tables"
# –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SQL –≤ –º–∏–≥—Ä–∞—Ü–∏—é
alembic upgrade head
```

---

### 2. indexes.sql
**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ 15+ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ß–∞—Å—Ç–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —É—Å–ª–æ–≤–∏–π
- ‚úÖ GIN –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è JSONB –ø–æ–ª–µ–π
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–∞–∂–¥–æ–º—É –∏–Ω–¥–µ–∫—Å—É
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–Ω–¥–µ–∫—Å–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã**:
- `idx_payments_user_id` - –ø–ª–∞—Ç–µ–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `idx_payments_invoice_id` - –ø–æ–∏—Å–∫ –ø–æ invoice
- `idx_payments_status` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `idx_payments_completed` - —Ä–∞—Å—á–µ—Ç –≤—ã—Ä—É—á–∫–∏ (partial)
- `idx_payments_user_status` - —Å–æ—Å—Ç–∞–≤–Ω–æ–π –¥–ª—è webhook

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
```bash
psql -U username -d database_name -f indexes.sql
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### 1. basic_integration.py
**–†–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä–∏–º–µ—Ä FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ –ü–æ–ª–Ω–æ–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≥–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î —Å AsyncPG
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞
- ‚úÖ Endpoint —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ Webhook handler
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã success/error
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π API
- ‚úÖ Health check endpoint

**–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å**:
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install fastapi sqlalchemy asyncpg uvicorn

# 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env
CRYPTOCLOUD_API_KEY=your_key
CRYPTOCLOUD_SHOP_ID=your_shop_id
DATABASE_URL=postgresql+asyncpg://user:pass@localhost/db

# 3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã
psql < sql/create_tables.sql
psql < sql/indexes.sql

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python examples/basic_integration.py
```

**Endpoints**:
- `GET /` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ñ–æ—Ä–º–æ–π
- `POST /create-payment` - –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
- `POST /api/webhook/payment` - Webhook –æ—Ç CryptoCloud
- `GET /payment/success` - –£—Å–ø–µ—Ö
- `GET /payment/error` - –û—à–∏–±–∫–∞
- `GET /payments` - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π (JSON)
- `GET /health` - Health check

---

### 2. test_integration.py
**–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤**

–°–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è CryptoCloudService (2 —Ç–µ—Å—Ç–∞)
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è PaymentService (7 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ Integration —Ç–µ—Å—Ç—ã –¥–ª—è API (4 —Ç–µ—Å—Ç–∞)
- ‚úÖ Performance —Ç–µ—Å—Ç—ã (1 —Ç–µ—Å—Ç)
- ‚úÖ Edge cases —Ç–µ—Å—Ç—ã (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ Fixtures –¥–ª—è –ë–î, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ Mocking –≤–Ω–µ—à–Ω–∏—Ö API

**–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤**: 17+

**–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å**:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pytest
pip install pytest pytest-asyncio httpx

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
pytest examples/test_integration.py -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest examples/test_integration.py --cov=app/services
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:
1. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞ —á–µ—Ä–µ–∑ API
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–Ω–≤–æ–π—Å–∞
3. ‚úÖ –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã —Å —Å–∫–∏–¥–∫–∞–º–∏
4. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –≤ –ë–î
5. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook
6. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
7. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
8. ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
9. ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (invalid data)

---

## üöÄ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (15 –º–∏–Ω—É—Ç)
```bash
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ QUICKSTART.md
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥
3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã (create_tables.sql)
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ basic_integration.py
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è webhook
6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–ª–∞—Ç–µ–∂
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç (1-2 —á–∞—Å–∞)
```bash
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ INTEGRATION.md —Ä–∞–∑–¥–µ–ª—ã 1-4
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ payment_service.py –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç
4. –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ routes –ø–æ–¥ —Å–≤–æ—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL –≤ CryptoCloud
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã (test_integration.py)
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ INTEGRATION.md —Ä–∞–∑–¥–µ–ª 9 (Production Checklist)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Production deployment (2-4 —á–∞—Å–∞)
```bash
1. –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–°—Ü–µ–Ω–∞—Ä–∏–π 2)
2. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã (indexes.sql)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (—Å–º. README.md)
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ backup –ë–î
6. Load testing
7. Security audit (INTEGRATION.md —Ä–∞–∑–¥–µ–ª 9)
8. Deploy –Ω–∞ production
9. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã
```

---

## üìä –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Backend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞):

1. **app/models/payment.py** - –ú–æ–¥–µ–ª—å –ë–î –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
   - –ü–æ–ª—è: id, user_id, invoice_id, amount, status, etc.
   - Relationship —Å User

2. **app/services/payment_service.py** - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (492 —Å—Ç—Ä–æ–∫–∏)
   - `CryptoCloudService` - —Ä–∞–±–æ—Ç–∞ —Å API
   - `PaymentService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞–º–∏

3. **app/routes/payment.py** - API endpoints (312 —Å—Ç—Ä–æ–∫)
   - Upgrade subscription endpoint
   - Webhook handler
   - Success/error pages

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ):

1. **INTEGRATION.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (45KB)
2. **QUICKSTART.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (10KB)
3. **README.md** - –æ–±–∑–æ—Ä –º–æ–¥—É–ª—è (13KB)
4. **create_tables.sql** - —Å—Ö–µ–º–∞ –ë–î
5. **indexes.sql** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
6. **basic_integration.py** - —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä
7. **test_integration.py** - —Ç–µ—Å—Ç—ã

---

## ‚úÖ –ß—Ç–æ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- [x] Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- [x] –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- [x] –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- [x] –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã
- [x] –°–∫–∏–¥–∫–∏ –∑–∞ –≥–æ–¥–æ–≤—É—é –ø–æ–¥–ø–∏—Å–∫—É

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è webhook –¥–∞–Ω–Ω—ã—Ö
- [x] SQL injection protection
- [x] –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- [x] –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤
- [x] Rate limiting —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- [x] –ò–Ω–¥–µ–∫—Å—ã –ë–î (15+)
- [x] Async –æ–ø–µ—Ä–∞—Ü–∏–∏
- [x] Connection pooling
- [x] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- [x] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫

### Testing:
- [x] Unit —Ç–µ—Å—Ç—ã (10+)
- [x] Integration —Ç–µ—Å—Ç—ã (4+)
- [x] Performance —Ç–µ—Å—Ç—ã
- [x] Edge cases
- [x] Fixtures –∏ mocks

### DevOps:
- [x] Docker ready
- [x] Migration scripts
- [x] Health checks
- [x] Logging guidelines
- [x] Production checklist

---

## üéì –û–±—É—á–µ–Ω–∏–µ

### –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤:
1. –ù–∞—á–Ω–∏—Ç–µ —Å **README.md** - –æ–±–∑–æ—Ä –º–æ–¥—É–ª—è
2. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ **QUICKSTART.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ **basic_integration.py** - –ø—Ä–∞–∫—Ç–∏–∫–∞
4. –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–º. —Ä–∞–∑–¥–µ–ª Troubleshooting

### –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
1. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ **INTEGRATION.md** —Ä–∞–∑–¥–µ–ª 3 (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. –ò–∑—É—á–∏—Ç–µ **payment_service.py** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ **test_integration.py** - —Ç–µ—Å—Ç—ã
4. –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ —Å–≤–æ–π —Å—Ç–µ–∫

### –î–ª—è DevOps:
1. **create_tables.sql** + **indexes.sql** - –ë–î
2. **INTEGRATION.md** —Ä–∞–∑–¥–µ–ª 9 - Production Checklist
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (README.md —Ä–∞–∑–¥–µ–ª –ú–µ—Ç—Ä–∏–∫–∏)
4. Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (.env):
   ```bash
   CRYPTOCLOUD_API_KEY=your_key
   CRYPTOCLOUD_SHOP_ID=your_shop_id
   BASE_URL=https://yourdomain.com
   ```

2. **–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã** (config.py):
   ```python
   PRICING_TIERS = {
       "free": {"price": 0, "requests": 100},
       "pro": {"price": 99, "requests": 100000},
       # –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ —Ç–∞—Ä–∏—Ñ—ã
   }
   ```

3. **URL –º–∞—Ä—à—Ä—É—Ç—ã** (routes/payment.py):
   - –ò–∑–º–µ–Ω–∏—Ç–µ `/dashboard/*` –Ω–∞ —Å–≤–æ–∏
   - –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ success/error —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–í–∞–ª—é—Ç–∞**: –ò–∑–º–µ–Ω–∏—Ç–µ `currency="USD"` –Ω–∞ —Å–≤–æ—é
2. **–°–∫–∏–¥–∫–∏**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏–∫—É –≤ `get_price_for_tier()`
3. **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –î–æ–±–∞–≤—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É –ø–æ—Å–ª–µ –ø–ª–∞—Ç–µ–∂–∞
4. **–ú–µ—Ç—Ä–∏–∫–∏**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å Prometheus/Grafana
5. **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**: –†–∞—Å—à–∏—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –ø–æ–º–æ—â—å

### CryptoCloud:
- Docs: https://cryptocloud.plus/docs
- Support: support@cryptocloud.plus
- Telegram: @cryptocloud_support

### –≠—Ç–æ—Ç –º–æ–¥—É–ª—å:
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: —Å–º. —Ñ–∞–π–ª—ã –≤—ã—à–µ
- Issues: —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ –≤–∞—à–µ–º repo
- –í–æ–ø—Ä–æ—Å—ã: —Å–º. —Ä–∞–∑–¥–µ–ª Troubleshooting

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ CryptoCloud:

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - [ ] –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂
   - [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook
   - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç–µ unit —Ç–µ—Å—Ç—ã
   - [ ] Load testing

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   - [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - [ ] –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏
   - [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã
   - [ ] Dashboard –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   - [ ] HTTPS –¥–ª—è webhook
   - [ ] Rate limiting
   - [ ] Backup –ë–î
   - [ ] Security audit

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**:
   - [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã
   - [ ] –ê–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - [ ] Connection pooling

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ú–æ–¥—É–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç.

**–í—Ä–µ–º—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
- –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 15 –º–∏–Ω—É—Ç
- –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: 1-2 —á–∞—Å–∞
- Production deployment: 2-4 —á–∞—Å–∞

**–ß—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å**:
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (3 —Ñ–∞–π–ª–∞)
- ‚úÖ SQL —Å–∫—Ä–∏–ø—Ç—ã (2 —Ñ–∞–π–ª–∞)
- ‚úÖ –†–∞–±–æ—á–∏–µ –ø—Ä–∏–º–µ—Ä—ã (2 —Ñ–∞–π–ª–∞)
- ‚úÖ –ì–æ—Ç–æ–≤—ã–π –∫ use –∫–æ–¥ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ 17+ —Ç–µ—Å—Ç–æ–≤
- ‚úÖ Production checklist

**–í–ø–µ—Ä–µ–¥, –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –∫—Ä–∏–ø—Ç–æ –ø–ª–∞—Ç–µ–∂–∏! üöÄ**

---

**–í–µ—Ä—Å–∏—è**: 1.0.0
**–°–æ–∑–¥–∞–Ω–æ**: –Ø–Ω–≤–∞—Ä—å 2025
**–õ–∏—Ü–µ–Ω–∑–∏—è**: MIT
