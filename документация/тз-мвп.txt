üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: ThePred MVP
üéØ –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
ThePred - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ prediction markets –≤ Telegram Mini App —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –≤–∞–ª—é—Ç–æ–π PRED –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π TON.
–í–µ—Ä—Å–∏—è: MVP 1.0
–°—Ä–æ–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: 4-6 –Ω–µ–¥–µ–ª—å
–ö–æ–º–∞–Ω–¥–∞: 2 backend, 1 frontend, 1 DevOps

üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
mermaidgraph TB
    User[User] --> TG[Telegram]
    TG --> Bot[Bot Service - aiogram]
    TG --> MA[Mini App - Quart]
    Bot --> API[API Gateway - FastAPI]
    MA --> API
    API --> Auth[Auth Service]
    API --> Market[Market Service]
    API --> Wallet[Wallet Service]
    API --> Game[Gamification Service]
    Admin[Admin Panel - Quart] --> API
    API --> PG[(PostgreSQL)]
    API --> Redis[(Redis)]
    API --> TON[TON Blockchain]

üì¶ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã MVP
1. Bot Service (aiogram)
python# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª MVP:
/start - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è + –≤—ã–¥–∞—á–∞ 10,000 PRED
/balance - –±–∞–ª–∞–Ω—Å PRED –∏ TON
/markets - —Ç–æ–ø-5 –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä–∫–µ—Ç–æ–≤
/bet <market_id> <yes/no> <amount> - –±—ã—Å—Ç—Ä–∞—è —Å—Ç–∞–≤–∫–∞
/referral - —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞
/help - –ø–æ–º–æ—â—å

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
bot/
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ start.py      # Onboarding
‚îÇ   ‚îú‚îÄ‚îÄ markets.py    # –ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ä–∫–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ betting.py    # –°—Ç–∞–≤–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ wallet.py     # –ë–∞–ª–∞–Ω—Å
‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îú‚îÄ‚îÄ inline.py     # Inline –∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ reply.py      # Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îî‚îÄ‚îÄ auth.py       # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ config.py
2. Backend API (FastAPI)
python# Endpoints MVP:

# Auth
POST /auth/telegram   # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
GET  /auth/verify     # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞

# User
GET  /user/profile    # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET  /user/balance    # –ë–∞–ª–∞–Ω—Å PRED/TON
POST /user/referral   # –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–∞

# Markets
GET  /markets         # –°–ø–∏—Å–æ–∫ –º–∞—Ä–∫–µ—Ç–æ–≤
GET  /markets/{id}    # –î–µ—Ç–∞–ª–∏ –º–∞—Ä–∫–µ—Ç–∞
POST /markets         # –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–∞ (v2)

# Betting
POST /bet             # –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É
GET  /bets/history    # –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫
GET  /bets/active     # –ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç–∞–≤–∫–∏

# Wallet
POST /wallet/deposit  # –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ TON
POST /wallet/withdraw # –í—ã–≤–æ–¥ TON (v2)
GET  /wallet/transactions # –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

# Gamification
GET  /missions        # –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π
POST /missions/claim  # –ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É
GET  /leaderboard     # –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤
3. Mini App Frontend (Quart + Jinja2)
python# –°—Ç—Ä–∞–Ω–∏—Ü—ã MVP:

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
webapp/
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ base.html         # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ index.html        # –ì–ª–∞–≤–Ω–∞—è (—Å–ø–∏—Å–æ–∫ –º–∞—Ä–∫–µ—Ç–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ market.html       # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞—Ä–∫–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ profile.html      # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ leaderboard.html  # –†–µ–π—Ç–∏–Ω–≥
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tailwind.css  # –°—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ telegram.js   # Telegram Web App SDK
‚îÇ       ‚îî‚îÄ‚îÄ betting.js    # –õ–æ–≥–∏–∫–∞ —Å—Ç–∞–≤–æ–∫
‚îî‚îÄ‚îÄ routes/
    ‚îú‚îÄ‚îÄ markets.py        # –†–æ—É—Ç—ã –º–∞—Ä–∫–µ—Ç–æ–≤
    ‚îú‚îÄ‚îÄ betting.py        # –†–æ—É—Ç—ã —Å—Ç–∞–≤–æ–∫
    ‚îî‚îÄ‚îÄ profile.py        # –†–æ—É—Ç—ã –ø—Ä–æ—Ñ–∏–ª—è
4. Admin Panel (Quart + Jinja2)
python# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª MVP:

# –°—Ç—Ä–∞–Ω–∏—Ü—ã:
/admin/dashboard      # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/admin/users          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
/admin/markets        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–∞–º–∏
/admin/missions       # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–¥–∞–Ω–∏–π
/admin/analytics      # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

# –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Resolve –º–∞—Ä–∫–µ—Ç–æ–≤ (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è)
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏—Å—Å–∏–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ real-time
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV

üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã MVP:
sql-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    telegram_id BIGINT UNIQUE,
    username VARCHAR(255),
    pred_balance DECIMAL(20,2) DEFAULT 10000,
    ton_balance DECIMAL(20,2) DEFAULT 0,
    rank VARCHAR(50) DEFAULT 'Bronze',
    referrer_id BIGINT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- –ú–∞—Ä–∫–µ—Ç—ã
CREATE TABLE markets (
    id BIGSERIAL PRIMARY KEY,
    title VARCHAR(500),
    description TEXT,
    yes_odds DECIMAL(5,2),
    no_odds DECIMAL(5,2),
    total_volume DECIMAL(20,2) DEFAULT 0,
    status VARCHAR(50), -- open/closed/resolved
    outcome VARCHAR(10), -- yes/no/null
    resolve_date TIMESTAMP,
    created_by BIGINT REFERENCES users(id),
    created_at TIMESTAMP DEFAULT NOW()
);

-- –°—Ç–∞–≤–∫–∏
CREATE TABLE bets (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT REFERENCES users(id),
    market_id BIGINT REFERENCES markets(id),
    position VARCHAR(10), -- yes/no
    amount DECIMAL(20,2),
    currency VARCHAR(10), -- PRED/TON
    odds DECIMAL(5,2),
    status VARCHAR(50), -- pending/won/lost
    created_at TIMESTAMP DEFAULT NOW()
);

-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
CREATE TABLE transactions (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT REFERENCES users(id),
    type VARCHAR(50), -- deposit/withdraw/bet/win
    currency VARCHAR(10),
    amount DECIMAL(20,2),
    tx_hash VARCHAR(255),
    status VARCHAR(50),
    created_at TIMESTAMP DEFAULT NOW()
);

-- –ú–∏—Å—Å–∏–∏
CREATE TABLE missions (
    id BIGSERIAL PRIMARY KEY,
    title VARCHAR(255),
    description TEXT,
    reward_amount DECIMAL(20,2),
    reward_currency VARCHAR(10),
    type VARCHAR(50), -- daily/weekly/special
    requirements JSONB
);

-- –ü—Ä–æ–≥—Ä–µ—Å—Å –º–∏—Å—Å–∏–π
CREATE TABLE user_missions (
    user_id BIGINT REFERENCES users(id),
    mission_id BIGINT REFERENCES missions(id),
    progress INTEGER DEFAULT 0,
    completed BOOLEAN DEFAULT FALSE,
    claimed BOOLEAN DEFAULT FALSE,
    PRIMARY KEY (user_id, mission_id)
);

üéÆ –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è MVP
–°–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–≥–æ–≤:
pythonRANKS = {
    "Bronze": {"min_bets": 0, "commission": 0.01},
    "Silver": {"min_bets": 10, "commission": 0.008},
    "Gold": {"min_bets": 50, "commission": 0.006},
}
Daily Missions:
pythonDAILY_MISSIONS = [
    {
        "id": "daily_bet_3",
        "title": "–°–¥–µ–ª–∞–π 3 —Å—Ç–∞–≤–∫–∏",
        "reward": 500,
        "currency": "PRED",
        "requirement": {"bets_count": 3}
    },
    {
        "id": "daily_win",
        "title": "–í—ã–∏–≥—Ä–∞–π —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Ç–∞–≤–∫—É",
        "reward": 1000,
        "currency": "PRED",
        "requirement": {"wins_count": 1}
    }
]
```

---

## üîÑ User Flow MVP

### **1. Onboarding:**
```
1. User –Ω–∞–∂–∏–º–∞–µ—Ç /start –≤ –±–æ—Ç–µ
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
3. –ü–æ–ª—É—á–∞–µ—Ç 10,000 PRED
4. Redirect –≤ Mini App
5. –ü–æ–∫–∞–∑ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞ (skippable)
```

### **2. –ü–µ—Ä–≤–∞—è —Å—Ç–∞–≤–∫–∞:**
```
1. –í—ã–±–æ—Ä –º–∞—Ä–∫–µ—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
2. –í—ã–±–æ—Ä –ø–æ–∑–∏—Ü–∏–∏ (YES/NO)
3. –í–≤–æ–¥ —Å—É–º–º—ã –≤ PRED
4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
5. –ê–Ω–∏–º–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
```

### **3. Daily Loop:**
```
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ daily missions
2. –°—Ç–∞–≤–∫–∏ –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–∞—Ä–∫–µ—Ç—ã
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –≤ leaderboard
4. –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π –¥–ª—è –±–æ–Ω—É—Å–æ–≤
5. Claim rewards

‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
Performance:

Response time < 200ms –¥–ª—è API
Mini App load < 2 —Å–µ–∫—É–Ω–¥—ã
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 10,000 concurrent users

Security:

JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
Rate limiting: 100 req/min per user
SQL injection protection
XSS protection –≤ Mini App

Monitoring:

Sentry –¥–ª—è error tracking
Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫
Telegram alerts –¥–ª—è critical errors

Infrastructure:
yaml# docker-compose.yml –¥–ª—è MVP
services:
  postgres:
    image: postgres:15
  redis:
    image: redis:7
  backend:
    build: ./backend
    replicas: 2
  bot:
    build: ./bot
  webapp:
    build: ./webapp
  admin:
    build: ./admin
  nginx:
    image: nginx
    # Load balancing –∏ SSL
```

---

## üìÖ Roadmap MVP

### **Sprint 1 (Week 1-2):**
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–∏
- [ ] Auth —á–µ—Ä–µ–∑ Telegram
- [ ] –ë–∞–∑–æ–≤—ã–µ API endpoints
- [ ] –ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç —Å /start –∏ /balance

### **Sprint 2 (Week 3-4):**
- [ ] Mini App —Å —Å–ø–∏—Å–∫–æ–º –º–∞—Ä–∫–µ—Ç–æ–≤
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å—Ç–∞–≤–æ–∫ PRED
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–≥–æ–≤
- [ ] Daily missions

### **Sprint 3 (Week 5-6):**
- [ ] Admin panel
- [ ] Leaderboard
- [ ] Referral —Å–∏—Å—Ç–µ–º–∞
- [ ] –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] Testing & bug fixes

---

## üöÄ –î–µ–ø–ª–æ–π MVP

### **–û–∫—Ä—É–∂–µ–Ω–∏—è:**
```
Development: localhost
Staging: staging.thepred.com
Production: thepred.com
CI/CD:
yaml# GitHub Actions
- Push to main ‚Üí Deploy to staging
- Tag release ‚Üí Deploy to production
- Automated tests before deploy
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ MVP

### **Week 1 –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:**
- 1,000 —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- 100 –∞–∫—Ç–∏–≤–Ω—ã—Ö daily users
- 10 —Å—Ç–∞–≤–æ–∫ –Ω–∞ —é–∑–µ—Ä–∞
- 1 —Å–æ–∑–¥–∞–Ω–Ω—ã–π –º–∞—Ä–∫–µ—Ç –æ—Ç —é–∑–µ—Ä–æ–≤

### **Month 1:**
- 10,000 —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
- 1,000 DAU
- 50 —Å—Ç–∞–≤–æ–∫ –Ω–∞ —é–∑–µ—Ä–∞
- Retention D7: 30%

---

## üí∞ –ë—é–¥–∂–µ—Ç MVP
```
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞: $5,000
- Backend: $2,000
- Frontend: $1,500
- Bot: $500
- Admin: $1,000

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–µ—Å—è—Ü): $200
- VPS: $100
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: $50
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: $50

–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥: $1,000
- Influencers: $500
- Ads: $300
- Community: $200

–ò–¢–û–ì–û: $6,200

–≠—Ç–æ –±–∞–∑–æ–≤–æ–µ –¢–ó –¥–ª—è MVP. –•–æ—á–µ—à—å –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫—É—é-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —á–∞—Å—Ç—å? –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–≥—É —Ä–∞—Å–ø–∏—Å–∞—Ç—å:

–î–µ—Ç–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ odds
Smart contract –¥–ª—è TON –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
–ê–ª–≥–æ—Ä–∏—Ç–º matching —Å—Ç–∞–≤–æ–∫
API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ OpenAPI —Ñ–æ—Ä–º–∞—Ç–µ